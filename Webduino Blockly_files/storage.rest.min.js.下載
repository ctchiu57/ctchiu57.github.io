!function(o){"use strict";var l=o.BlocklyStorage,e=o.location.host.replace(/:[0-9].*$/,"").split(".");e.slice(e.length-2,e.length).join(".");o.i18next.use(o.i18nextBrowserLanguageDetector).use(o.i18nextXHRBackend).init({load:"currentOnly",lowerCaseLng:!0,fallbackLng:"zh-tw",preload:["en","zh-tw","zh-cn"],backend:{loadPath:"locales/{{lng}}.json"},detection:{order:["cookie","navigator"],lookupCookie:"locale"}}),l.load=function(l){var e=o.location.origin;if("localStorage"in o&&o.localStorage[e]){var a=l||Blockly.getMainWorkspace(),t=Blockly.Xml.textToDom(o.localStorage[e]);Blockly.Xml.domToWorkspace(t,a)}},l.unsaved=!1,l.save=function(e){var a=Blockly.Xml.workspaceToDom(e),t=Blockly.Xml.domToText(a);if(l.unsaved&&"localStorage"in o){t=Blockly.Xml.workspaceToDom(e);var n=o.location.origin;o.localStorage.setItem(n,Blockly.Xml.domToText(t)),l.unsaved=!1}},BlocklySimStorage.save=function(l,e){if("localStorage"in o)try{var a={};a.config=e.contentWindow.blockly.getConfig(),a.opened=l.classList.contains("show"),a.isFull=l.classList.contains("full"),a.width=l.dataset.width,a.height=l.dataset.height,o.localStorage.setItem(BlocklySimStorage.LOCALSTORAGE_KEY,JSON.stringify(a))}catch(o){console.warn(o)}}}(window);